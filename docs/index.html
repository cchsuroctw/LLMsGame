<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>魔術方塊 3×3（2D 展開圖）</title>
  <style>
    :root{
      --size: 36px;        /* 單格大小 */
      --gap: 4px;          /* 格子間距 */
      --border: 2px;       /* 格子外框 */
      --bg: #0f1220;
      --panel: #171a2b;
      --text: #e8ecff;
      --muted: #aab2d5;
      --accent: #6ee7ff;
      --danger: #ff6b6b;
      --ok: #48ff95;
    }
    *{ box-sizing: border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans TC", sans-serif;
      background: radial-gradient(1200px 800px at 10% 0%, #202553, var(--bg));
      color: var(--text);
      display:flex;
      min-height:100vh;
      align-items:center;
      justify-content:center;
      padding: 24px;
    }
    .app{
      width: min(1100px, 100%);
      display:grid;
      grid-template-columns: 1fr 320px;
      gap: 16px;
    }
    @media (max-width: 900px){
      .app{ grid-template-columns: 1fr; }
    }
    .board{
      background: rgba(255,255,255,0.03);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 16px;
      padding: 18px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.35);
      overflow:auto;
    }
    .side{
      background: rgba(255,255,255,0.03);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 16px;
      padding: 18px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.35);
      display:flex;
      flex-direction:column;
      gap: 14px;
    }

    .title{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap: 10px;
      margin-bottom: 12px;
    }
    .title h1{
      margin:0;
      font-size: 20px;
      letter-spacing: .5px;
    }
    .title .hint{
      color: var(--muted);
      font-size: 12px;
      line-height: 1.2;
      text-align:right;
    }

    /* 2D 展開圖布局：     [   U   ]
                          [L  F  R  B]
                          [   D   ] */
    .net{
      display:grid;
      grid-template-columns: repeat(4, calc(3*var(--size) + 2*var(--gap)));
      grid-template-rows: repeat(3, calc(3*var(--size) + 2*var(--gap)));
      gap: 12px;
      align-items:start;
      justify-content:start;
      padding: 10px 2px;
      min-width: 520px; /* 小螢幕可水平捲動 */
    }
    .face{
      display:grid;
      grid-template-columns: repeat(3, var(--size));
      grid-template-rows: repeat(3, var(--size));
      gap: var(--gap);
      padding: 10px;
      border-radius: 14px;
      background: rgba(0,0,0,0.25);
      border: 1px solid rgba(255,255,255,0.06);
      position:relative;
      user-select:none;
    }
    .face::before{
      content: attr(data-name);
      position:absolute;
      top: 10px;
      left: 12px;
      font-size: 12px;
      color: var(--muted);
    }
    .sticker{
      width: var(--size);
      height: var(--size);
      border-radius: 8px;
      border: var(--border) solid rgba(0,0,0,0.35);
      box-shadow: inset 0 2px 0 rgba(255,255,255,0.12);
    }

    /* 面的位置 */
    .U{ grid-column: 2; grid-row: 1; }
    .L{ grid-column: 1; grid-row: 2; }
    .F{ grid-column: 2; grid-row: 2; }
    .R{ grid-column: 3; grid-row: 2; }
    .B{ grid-column: 4; grid-row: 2; }
    .D{ grid-column: 2; grid-row: 3; }

    .controls{
      display:flex;
      flex-wrap:wrap;
      gap: 8px;
    }
    button{
      appearance:none;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.06);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 12px;
      cursor:pointer;
      transition: transform .05s ease, background .2s ease, border-color .2s ease;
      font-weight: 600;
      letter-spacing: .2px;
    }
    button:hover{
      background: rgba(255,255,255,0.10);
      border-color: rgba(255,255,255,0.18);
    }
    button:active{ transform: translateY(1px); }
    .primary{ border-color: rgba(110,231,255,0.35); }
    .danger{ border-color: rgba(255,107,107,0.35); }
    .small{ padding: 8px 10px; font-weight: 600; font-size: 13px;}
    .row{ display:flex; gap: 8px; flex-wrap:wrap; }

    .stats{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    .card{
      background: rgba(0,0,0,0.22);
      border: 1px solid rgba(255,255,255,0.06);
      border-radius: 14px;
      padding: 12px;
    }
    .card .label{
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 6px;
    }
    .card .value{
      font-size: 18px;
      font-weight: 800;
      letter-spacing: .4px;
    }

    .status{
      padding: 12px;
      border-radius: 14px;
      border: 1px dashed rgba(255,255,255,0.18);
      background: rgba(0,0,0,0.18);
      color: var(--muted);
      line-height: 1.55;
      font-size: 13px;
    }
    .status strong{ color: var(--text); }

    .kbd{
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.12);
      padding: 2px 6px;
      border-radius: 8px;
      color: var(--accent);
      font-weight: 700;
    }

    .solved{
      border-color: rgba(72,255,149,0.35) !important;
      background: rgba(72,255,149,0.08) !important;
      color: #caffde !important;
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="board">
      <div class="title">
        <h1>魔術方塊 3×3（2D 展開圖）</h1>
        <div class="hint">
          鍵盤：<span class="kbd">U D L R F B</span> 轉面，<span class="kbd">Shift</span> + 字母 = 逆轉（例如 U'）<br/>
          <span style="opacity:.75;">例：按住 Shift 再按 U → U'</span>
        </div>
      </div>

      <div id="net" class="net">
        <div class="face U" data-name="U(上)"></div>
        <div class="face L" data-name="L(左)"></div>
        <div class="face F" data-name="F(前)"></div>
        <div class="face R" data-name="R(右)"></div>
        <div class="face B" data-name="B(後)"></div>
        <div class="face D" data-name="D(下)"></div>
      </div>
    </div>

    <div class="side">
      <div class="stats">
        <div class="card">
          <div class="label">步數</div>
          <div id="moves" class="value">0</div>
        </div>
        <div class="card">
          <div class="label">計時</div>
          <div id="time" class="value">00:00</div>
        </div>
      </div>

      <div class="row">
        <button class="primary" id="shuffleBtn">Shuffle 打亂</button>
        <button id="resetBtn" class="danger">Reset 重置</button>
      </div>

      <div class="status" id="statusBox">
        <strong>操作：</strong><br/>
        - 點按按鈕或用鍵盤輸入 U/D/L/R/F/B<br/>
        - <span class="kbd">Shift</span> + 字母表示逆時針（U'）<br/>
        - Shuffle 會打亂並開始計時
      </div>

      <div>
        <div style="font-weight:800;margin:6px 0 10px;">轉面按鈕</div>
        <div class="controls">
          <button class="small" data-move="U">U</button>
          <button class="small" data-move="U'">U'</button>
          <button class="small" data-move="D">D</button>
          <button class="small" data-move="D'">D'</button>

          <button class="small" data-move="L">L</button>
          <button class="small" data-move="L'">L'</button>
          <button class="small" data-move="R">R</button>
          <button class="small" data-move="R'">R'</button>

          <button class="small" data-move="F">F</button>
          <button class="small" data-move="F'">F'</button>
          <button class="small" data-move="B">B</button>
          <button class="small" data-move="B'">B'</button>
        </div>
      </div>
    </div>
  </div>

<script>
(() => {
  // 面的索引順序固定：0..8 = row-major
  // U D L R F B
  const faces = ["U","D","L","R","F","B"];

  // 顏色（可自行改）
  const COLORS = {
    U: "#ffffff", // 白
    D: "#ffd500", // 黃
    L: "#ff8c1a", // 橘
    R: "#e53935", // 紅
    F: "#2ecc71", // 綠
    B: "#1e88e5"  // 藍
  };

